(()=>{(function(){"use strict";let i={config:{breakpoint:1497},init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.process()):this.process()},process(){this.wrapMarginNotes()},wrapMarginNotes(){document.querySelectorAll(".marginnote").forEach(e=>{if(e.querySelector(".marginnote-inner-wrapper"))return;let o=document.createElement("span");for(o.className="marginnote-inner-wrapper";e.firstChild;)o.appendChild(e.firstChild);e.appendChild(o),o.textContent.trim().length<=1&&e.classList.add("only-icon");let t=e.closest("p");if(!t)return;t.classList.add("has-margin-note");let r=[];for(let n=0;n<t.childNodes.length;n++){let s=t.childNodes[n];if(e.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING)(s.nodeType===Node.ELEMENT_NODE||s.nodeType===Node.TEXT_NODE)&&r.push(s);else break}let c=r.map(n=>n.textContent).join(""),a=t.textContent,d=c.length/a.length,l=Math.round(100*d);e.style.setProperty("--marginnote-vertical-position",`${l}%`)})}};i.init(),window.MarginNotes=i})();})();
