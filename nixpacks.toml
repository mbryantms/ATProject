# Nixpacks build configuration
# https://nixpacks.com/docs/configuration/file

[phases.setup]
# System packages required for the application
nixPkgs = [
    "python313",
    "postgresql",      # psycopg2 build dependency
    "zlib",            # Pillow dependency
    "libjpeg",         # Pillow dependency
    "libwebp",         # Pillow dependency
    "freetype",        # Pillow dependency
    "lcms2",           # Pillow dependency
    "openjpeg",        # Pillow dependency
    "libtiff",         # Pillow dependency
    "ffmpeg",          # Media processing
    "pandoc",          # Markdown conversion
]

[phases.install]
cmds = ["pip install -r requirements.txt"]

[phases.build]
cmds = ["python manage.py collectstatic --noinput"]
